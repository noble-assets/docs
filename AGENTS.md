# Agent Guide for Noble Documentation Repository

This guide helps LLM agents efficiently work with the Noble Chain documentation repository.

## Project Overview

This is the **Noble Chain Documentation** repository, a Docusaurus-based documentation site for the Noble blockchain. The site is deployed at https://docs.noble.xyz/.

### Purpose
- Provide comprehensive documentation for Noble blockchain
- Document modules, technical references, and integration guides
- Track Noble chain versions and auto-update documentation when new versions are released
- Serve as a reference for developers, validators, and integrators

## Tech Stack

### Frontend/Documentation
- **Docusaurus 3.7.0** - Static site generator for documentation
- **React 19.0.0** - UI framework
- **MDX** - Enhanced Markdown with JSX support
- **Mermaid** - Diagram rendering
- **KaTeX** - Math rendering
- **Bun** - Package manager and task runner (v1.2.13)
- **Node.js 20.18.0** - JavaScript runtime

### Backend/Tooling
- **Python 3.12** - For version tracking and automation scripts
- **pytest** - Testing framework for Python scripts
- **uv** - Fast Python package installer
- **mise** - Tool version manager and task runner

## Repository Structure

```
/Users/malteherrmann/.cursor/worktrees/docs/ZXnqE/
├── docs/                          # Documentation content (MDX/Markdown files)
│   ├── build/                     # Build, deployment, and node operation docs
│   ├── learn/                     # Educational content (governance, PoA, USDN)
│   ├── technical_reference/       # Technical specs and module references
│   └── index.mdx                  # Homepage
├── src/                           # React components and custom code
│   ├── components/                # Reusable React components
│   ├── css/                       # Custom styles
│   ├── pages/                     # Custom pages
│   └── theme/                     # Theme customizations
├── static/                        # Static assets (images, icons, etc.)
│   └── img/                       # Image files
├── scripts/                       # Automation scripts
│   └── check_noble_version/       # Python package for version tracking
├── tests/                         # Test files for Python scripts
├── docusaurus.config.js           # Docusaurus configuration
├── sidebars.js                    # Sidebar configuration (auto-generated)
├── package.json                   # Node.js dependencies and scripts
├── requirements.txt               # Python dependencies
├── .mise.toml                     # Tool versions and tasks
└── .noble_version_tracker.json    # Tracks last documented Noble version
```

## Development Setup

### Prerequisites
The repository uses **mise** for tool version management. All required tools are defined in `.mise.toml`.

### Quick Start

1. **Install all dependencies**:
   ```bash
   mise run install
   # Or manually:
   # bun install
   # uv venv --clear
   # uv pip install -r requirements.txt
   ```

2. **Start development server**:
   ```bash
   mise run start
   # Or: bun start
   ```

3. **Build static site**:
   ```bash
   mise run build
   # Or: bun build
   ```

4. **Run version check script**:
   ```bash
   mise run check-version
   # Or: uv run python scripts/check_noble_version.py
   ```

5. **Run tests**:
   ```bash
   mise run test
   # Or: uv run pytest scripts/check_noble_version/test_*.py -v
   ```

## Key Conventions and Patterns

### Documentation Files

1. **File Naming**:
   - Use lowercase with hyphens: `chain-upgrades.mdx`, `running-your-own-node.mdx`
   - Use `.mdx` for files with React components or JSX
   - Use `.md` for pure Markdown files

2. **Category Organization**:
   - Each directory with multiple docs should have a `_category_.json` file
   - Category JSON format:
     ```json
     {
       "label": "Display Name",
       "collapsed": true,
       "position": 1
     }
     ```

3. **Sidebar**:
   - Sidebar is **auto-generated** from the `docs/` folder structure
   - Controlled by `sidebars.js` (currently using `type: 'autogenerated'`)
   - To manually control sidebar, modify `sidebars.js`

### React Components

Custom components are in `src/components/`:
- `Button.js` - Custom button component
- `Collapse.js` - Collapsible sections
- `GitHubButton.js` - GitHub link button
- `PolkachuIcon.js` - Custom icon

Import components in MDX files:
```jsx
import Button from '@site/src/components/Button';

<Button href="/some-link">Click Me</Button>
```

### Theme Customization

- Theme components: `src/theme/`
- Custom CSS: `src/css/custom.css`
- MDX components: `src/theme/MDXComponents.js`
- Root component: `src/theme/Root.js`

### Images and Assets

- Store images in `static/img/`
- Module-specific images: `docs/technical_reference/modules/images/`
- Reference images in MDX: `![Alt text](/img/filename.png)`
- Use relative paths for images in same directory

## Python Scripts and Automation

### Noble Version Tracker

Located in `scripts/check_noble_version/`, this package:
1. Reads the latest mainnet upgrade version from `docs/build/chain-upgrades/mainnet.mdx`
2. Compares it with the tracked version in `.noble_version_tracker.json`
3. Fetches diffs from the Noble GitHub repository
4. Generates update suggestions for documentation

**Package Structure**:
```
scripts/check_noble_version/
├── __init__.py         # Package exports
├── cli.py              # Command-line interface
├── config.py           # Configuration and paths
├── version.py          # Version parsing and comparison
├── parser.py           # Parse upgrade versions from MDX
├── tracker.py          # Load/save tracker JSON
├── github.py           # GitHub API interactions
└── test_*.py           # Unit tests
```

**Usage**:
```bash
# Run version check
mise run check-version

# Run tests
mise run test
```

### Test Files

Tests are in `tests/` directory:
- `test_check_noble_version.py` - Tests for version tracking script
- Use pytest for running tests
- Follow naming convention: `test_*.py`

## Important Paths and Constants

| Purpose | Path |
|---------|------|
| Documentation root | `docs/` |
| Mainnet upgrades | `docs/build/chain-upgrades/mainnet.mdx` |
| Module references | `docs/technical_reference/modules/` |
| Version tracker | `.noble_version_tracker.json` |
| Python package | `scripts/check_noble_version/` |
| Custom components | `src/components/` |
| Static assets | `static/img/` |
| Config file | `docusaurus.config.js` |

## Making Changes

### Adding New Documentation

1. **Create MDX/MD file** in appropriate `docs/` subdirectory
2. **Add frontmatter** (if needed):
   ```mdx
   ---
   title: Page Title
   description: Page description
   ---
   ```
3. **Update `_category_.json`** if creating a new directory
4. Sidebar will auto-update based on file structure

### Adding New Module Documentation

1. Create `docs/technical_reference/modules/new-module.mdx`
2. Follow existing module documentation patterns
3. Add images to `docs/technical_reference/modules/images/` if needed
4. Include:
   - Overview
   - State
   - Messages
   - Queries
   - Events
   - Parameters

### Updating Python Scripts

1. **Add code** to appropriate module in `scripts/check_noble_version/`
2. **Export** in `__init__.py` if needed
3. **Write tests** in `scripts/check_noble_version/test_*.py`
4. **Run tests**: `mise run test`
5. **Update type hints** and docstrings

### Adding React Components

1. Create component in `src/components/ComponentName.js`
2. Follow React 19 patterns
3. Use className for styling (see `src/css/custom.css`)
4. Export component
5. Import in MDX files using `@site/src/components/ComponentName`

## Configuration Files

### docusaurus.config.js
Main configuration file for Docusaurus:
- Site metadata (title, URL, favicon)
- Theme configuration
- Navbar items
- Footer links
- Prism language support
- Mermaid theme settings
- Math rendering (KaTeX)

### sidebars.js
Currently using auto-generated sidebars from `docs/` structure. Modify if manual control needed.

### .mise.toml
Defines:
- Tool versions (Node, Python, Bun)
- Common tasks (`install`, `start`, `build`, `check-version`, `test`)

### package.json
Node.js dependencies and Docusaurus scripts:
- `bun start` - Development server
- `bun build` - Production build
- `bun serve` - Serve built site locally

## Common Workflows

### Adding a New Page
```bash
# 1. Create the file
touch docs/new-section/new-page.mdx

# 2. Add content with frontmatter
# 3. Create _category_.json if new section
# 4. Test locally
mise run start
```

### Updating Version Tracker
```bash
# 1. Check current version
mise run check-version

# 2. If version mismatch, review suggested changes
# 3. Update documentation files
# 4. Test the changes
mise run start
```

### Adding Tests
```bash
# 1. Create test file
touch scripts/check_noble_version/test_new_feature.py

# 2. Write tests using pytest
# 3. Run specific test
uv run pytest scripts/check_noble_version/test_new_feature.py -v

# 4. Run all tests
mise run test
```

## Deployment

- Production URL: https://docs.noble.xyz/
- GitHub Pages deployment
- Organization: noble-assets
- Repository: docs
- Deploy command: `bun run deploy`

## Important Notes for Agents

1. **Always use mise tasks** when available (defined in `.mise.toml`)
2. **Preserve existing patterns** - follow the established code structure
3. **Test locally** before committing changes
4. **Update tests** when modifying Python scripts
5. **Check linter** - Docusaurus has strict link checking (`onBrokenLinks: 'throw'`)
6. **Math rendering** - Use `\(` and `\)` for inline, `\[` and `\]` for block math
7. **Diagrams** - Use Mermaid for diagrams in MDX files
8. **Images** - Store in `static/img/` or module-specific image directories
9. **Version tracking** - The `.noble_version_tracker.json` file is auto-managed
10. **Python environment** - Use `uv` for fast Python package management

## External Links and Resources

- Noble Chain: https://noble.xyz
- Noble GitHub: https://github.com/noble-assets/noble
- Noble API: https://api.noble.xyz
- Explorer: https://www.mintscan.io/noble/
- Docusaurus Docs: https://docusaurus.io/docs

## Git Workflow

- Main branch: `main`
- Feature branches: Create descriptive branch names (e.g., `add-new-module-docs`, `update-cctp-guide`)
- The repository tracks untracked files and modifications
- Check git status before committing

## Questions or Issues?

When working on this repository:
1. Check existing documentation patterns
2. Review similar files for structure
3. Test locally before committing
4. Run tests if modifying Python code
5. Check for broken links with `bun build`

---

**Last Updated**: November 14, 2025
**Repository**: noble-assets/docs
**Maintainers**: Noble development team

